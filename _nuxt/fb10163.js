(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{343:function(e,t,r){"use strict";r.r(t);var n=r(9),o=(r(47),r(29),r(201),{name:"domainList",head:function(){return{script:[{src:"/vendor/datatables/jquery.dataTables.min.js",body:!0},{src:"/vendor/datatables/dataTables.bootstrap4.min.js",body:!0},{src:"/js/demo/datatables-demo.js",body:!0}],link:[{rel:"stylesheet",type:"text/css",href:"/vendor/datatables/dataTables.bootstrap4.min.css"}]}},data:function(){return{users:[],showError:!1,errorMessage:""}},asyncData:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$axios,n=e.$auth,o=n.strategy.token.get().split(" ")[1],r.setHeader("x-access-token",o),t.next=5,r.$get("/users/users");case 5:if("ok"!==(c=t.sent).status){t.next=10;break}return t.abrupt("return",{users:c.users});case 10:return t.abrupt("return",{showError:!0,errorMessage:c.msg});case 11:case"end":return t.stop()}}),t)})))()},methods:{deleteUser:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!confirm("Are you sure you want to delete this domain?")){r.next=6;break}return n=t.$auth.strategy.token.get().split(" ")[1],t.$axios.setHeader("x-access-token",n),r.next=5,t.$axios.delete("/users/delete",{data:{userId:e}});case 5:t.$nuxt.refresh();case 6:case"end":return r.stop()}}),r)})))()}}}),c=r(16),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),e._v(" "),r("div",{staticClass:"card shadow mb-4"},[r("div",{staticClass:"card-body"},[e.showError?r("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v("\n        "+e._s(e.errorMessage)+"\n      ")]):e._e(),e._v(" "),r("div",{staticClass:"table-responsive"},[r("table",{staticClass:"table table-bordered",attrs:{id:"dataTable",width:"100%",cellspacing:"0"}},[e._m(1),e._v(" "),r("tbody",e._l(e.users,(function(t,n){return r("tr",{key:n},[r("td",[e._v("\n                "+e._s(t.username)+"\n              ")]),e._v(" "),r("td",[e._v(e._s(t.email))]),e._v(" "),r("td",[e._v("\n                "+e._s(t.role)+"\n              ")]),e._v(" "),r("td",[e._v(e._s(t.verified))]),e._v(" "),r("td",[r("button",{staticClass:"btn btn-danger",on:{click:function(r){return e.deleteUser(t._id)}}},[e._v("\n                  Delete\n                ")])])])})),0)])])])])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"h3 mb-2 text-gray-800"},[e._v("Users")]),e._v(" "),r("p",{staticClass:"mb-4"},[e._v("Manage users and their permissions.")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("Username")]),e._v(" "),r("th",[e._v("Email")]),e._v(" "),r("th",[e._v("Role")]),e._v(" "),r("th",[e._v("Verified")]),e._v(" "),r("th",[e._v("Delete user")])])])}],!1,null,null,null);t.default=component.exports}}]);