(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{343:function(e,t,r){"use strict";r.r(t);var o=r(9),n=(r(47),r(29),r(201),r(40),r(15),{name:"addRepository",data:function(){return{repo:{domain:"",url:"",access_token:"",username:"",password:"",email:""},showError:!1,errorMessage:""}},methods:{addRepo:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$auth.strategy.token.get().split(" ")[1],e.$axios.setHeader("x-access-token",r),t.next=4,e.$axios.post("/repositories/add",{repo:e.repo});case 4:"error"===(o=t.sent).data.status?(e.showError=!0,e.errorMessage=o.data.msg):e.$router.push("/repositories/list");case 6:case"end":return t.stop()}}),t)})))()}},asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,n,l,m,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$axios,o=e.$auth,n=o.strategy.token.get().split(" ")[1],r.setHeader("x-access-token",n),t.next=5,r.get("/domains/domains");case 5:return l=t.sent,t.next=8,r.get("/repositories/list");case 8:return m=t.sent,d=l.data.filter((function(e){return m.data.every((function(t){return t.domain!==e.url}))})),t.abrupt("return",{domains:d});case 11:case"end":return t.stop()}}),t)})))()}}),l=r(16),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.addRepo.apply(null,arguments)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"urls"}},[e._v("Domain")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.repo.domain,expression:"repo.domain"}],staticClass:"form-control",attrs:{name:"domains",required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.repo,"domain",t.target.multiple?r:r[0])}}},[r("option",{attrs:{disabled:"",value:"",selected:""}},[e._v("Please select one")]),e._v(" "),e._l(e.domains,(function(t,o){return r("option",{key:o,domProps:{value:t.url}},[e._v("\n              "+e._s(t.url)+"\n            ")])}))],2),e._v(" "),r("small",{staticClass:"form-text text-muted"},[e._v("Select the Domain which belongs to the new repository")])]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"exampleInputEmail1"}},[e._v("Repository URL")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.repo.url,expression:"repo.url"}],staticClass:"form-control",attrs:{type:"url",id:"exampleInputEmail1","aria-describedby":"emailHelp"},domProps:{value:e.repo.url},on:{input:function(t){t.target.composing||e.$set(e.repo,"url",t.target.value)}}}),e._v(" "),e.showError?r("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v("\n            "+e._s(e.errorMessage)+"\n          ")]):e._e(),e._v(" "),r("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[e._v("Add the repository URL like: e.g.\n            https://github.com/trenntoilette-net/trockentrenntoilette-net.github.io")])]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"exampleInputPassword1"}},[e._v("Repository Access Token")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.repo.access_token,expression:"repo.access_token"}],staticClass:"form-control",attrs:{type:"password",id:"exampleInputPassword1"},domProps:{value:e.repo.access_token},on:{input:function(t){t.target.composing||e.$set(e.repo,"access_token",t.target.value)}}}),e._v(" "),r("small",{staticClass:"form-text text-muted",attrs:{id:"access_tokenHelp"}},[e._v("Add the repository access token")])]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"exampleInputPassword1"}},[e._v("Repository Username")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.repo.username,expression:"repo.username"}],staticClass:"form-control",attrs:{type:"text",id:"exampleInputPassword1"},domProps:{value:e.repo.username},on:{input:function(t){t.target.composing||e.$set(e.repo,"username",t.target.value)}}}),e._v(" "),r("small",{staticClass:"form-text text-muted",attrs:{id:"usernameHelp"}},[e._v("Add the repository username")])]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"exampleInputPassword1"}},[e._v("Repository Password")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.repo.password,expression:"repo.password"}],staticClass:"form-control",attrs:{type:"password",id:"exampleInputPassword1"},domProps:{value:e.repo.password},on:{input:function(t){t.target.composing||e.$set(e.repo,"password",t.target.value)}}}),e._v(" "),r("small",{staticClass:"form-text text-muted",attrs:{id:"passwordHelp"}},[e._v("Add the repository password")])]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"exampleInputPassword1"}},[e._v("Repository Email")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.repo.email,expression:"repo.email"}],staticClass:"form-control",attrs:{type:"email",id:"exampleInputPassword1"},domProps:{value:e.repo.email},on:{input:function(t){t.target.composing||e.$set(e.repo,"email",t.target.value)}}}),e._v(" "),r("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[e._v("Add the repository email")])]),e._v(" "),r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Save")])])])])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-sm-flex align-items-center justify-content-between mb-4"},[r("h1",{staticClass:"h3 mb-0 text-gray-800"},[e._v("Add repository")])])}],!1,null,null,null);t.default=component.exports}}]);